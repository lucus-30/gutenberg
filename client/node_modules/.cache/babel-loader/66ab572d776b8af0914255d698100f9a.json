{"ast":null,"code":"import\"antd/es/input/style\";import _Input from\"antd/es/input\";import _slicedToArray from\"/home/luke/Code/CC/gutenberg/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"antd/es/list/style\";import _List from\"antd/es/list\";import\"antd/es/card/style\";import _Card from\"antd/es/card\";import\"antd/es/descriptions/style\";import _Descriptions from\"antd/es/descriptions\";import _objectSpread from\"/home/luke/Code/CC/gutenberg/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import\"antd/es/select/style\";import _Select from\"antd/es/select\";import\"antd/es/layout/style\";import _Layout from\"antd/es/layout\";import React,{useReducer}from\"react\";import Api from\"services/api\";var Header=_Layout.Header,Content=_Layout.Content;var Option=_Select.Option;var initialState={field:\"title\",query:\"\",isLoading:false,books:[]};var reducer=function reducer(state,action){switch(action.type){case\"SET_FIELD\":return _objectSpread({},state,{field:action.payload});case\"SET_QUERY\":return _objectSpread({},state,{query:action.payload});case\"SET_LOADING\":return _objectSpread({},state,{isLoading:action.payload});case\"SET_BOOKS\":return _objectSpread({},state,{isLoading:false,books:action.payload});default:return state;}};var SearchResults=function SearchResults(_ref){var dataSource=_ref.dataSource;return/*#__PURE__*/React.createElement(_List,{grid:{gutter:16,column:4},dataSource:dataSource,renderItem:function renderItem(item){return/*#__PURE__*/React.createElement(_List.Item,null,/*#__PURE__*/React.createElement(_Card,{title:item.title},/*#__PURE__*/React.createElement(_Descriptions,{column:1},/*#__PURE__*/React.createElement(_Descriptions.Item,{label:\"Authors\"},item.authors),/*#__PURE__*/React.createElement(_Descriptions.Item,{label:\"Publication Date\"},item.publication_date.split(\"-\").reverse().join(\"/\")),/*#__PURE__*/React.createElement(_Descriptions.Item,{label:\"Authors\"},item.authors),/*#__PURE__*/React.createElement(_Descriptions.Item,{label:\"Subjects\"},item.subjects),/*#__PURE__*/React.createElement(_Descriptions.Item,{label:\"Publisher\"},item.publisher))));}});};var App=function App(_ref2){var children=_ref2.children;var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];console.log(state);var searchHandler=function searchHandler(query){dispatch({type:\"SET_LOADING\",payload:true});Api.Search({field:state.field,query:query}).then(function(_ref3){var data=_ref3.data;dispatch({type:\"SET_BOOKS\",payload:data});dispatch({type:\"SET_LOADING\",payload:false});}).catch(console.log);};var books=state.books.length>0?/*#__PURE__*/React.createElement(SearchResults,{dataSource:state.books}):null;return/*#__PURE__*/React.createElement(_Layout,null,/*#__PURE__*/React.createElement(Header,{className:\"header\",style:{background:\"#fff\"}},/*#__PURE__*/React.createElement(_Input.Group,{compact:true,style:{margin:\"16px 0\"}},/*#__PURE__*/React.createElement(_Select,{defaultValue:\"title\"},/*#__PURE__*/React.createElement(Option,{value:\"title\"},\"Title\"),/*#__PURE__*/React.createElement(Option,{value:\"authors\"},\"Author\")),/*#__PURE__*/React.createElement(_Input.Search,{placeholder:\"input search text\",enterButton:true,style:{width:\"30%\"},onSearch:searchHandler}))),/*#__PURE__*/React.createElement(_Layout,{style:{padding:\"0 24px 24px\"}},/*#__PURE__*/React.createElement(Content,{className:\"site-layout-background\",style:{padding:24,margin:0,minHeight:\"91vh\"}},books)));};export default App;","map":{"version":3,"sources":["/home/luke/Code/CC/gutenberg/client/src/app.js"],"names":["React","useReducer","Api","Header","Content","Option","initialState","field","query","isLoading","books","reducer","state","action","type","payload","SearchResults","dataSource","gutter","column","item","title","authors","publication_date","split","reverse","join","subjects","publisher","App","children","dispatch","console","log","searchHandler","Search","then","data","catch","length","background","margin","width","padding","minHeight"],"mappings":"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","sourcesContent":["import React, { useReducer } from \"react\"\nimport { Layout, Input, Select, List, Card, Descriptions } from \"antd\"\nimport Api from \"services/api\"\n\nconst { Header, Content } = Layout\nconst { Option } = Select\n\nconst initialState = {\n  field: \"title\",\n  query: \"\",\n  isLoading: false,\n  books: [],\n}\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"SET_FIELD\":\n      return {\n        ...state,\n        field: action.payload,\n      }\n    case \"SET_QUERY\":\n      return {\n        ...state,\n        query: action.payload,\n      }\n    case \"SET_LOADING\":\n      return {\n        ...state,\n        isLoading: action.payload,\n      }\n    case \"SET_BOOKS\":\n      return {\n        ...state,\n        isLoading: false,\n        books: action.payload,\n      }\n    default:\n      return state\n  }\n}\n\nconst SearchResults = ({dataSource}) => {\n  return (\n    <List \n      grid={{ gutter: 16, column: 4 }}\n      dataSource={dataSource}\n      renderItem={item => (\n        <List.Item>\n          <Card title={item.title}>\n            <Descriptions column={1}>\n              <Descriptions.Item label=\"Authors\">{item.authors}</Descriptions.Item>\n              <Descriptions.Item label=\"Publication Date\">{item.publication_date.split(\"-\").reverse().join(\"/\")}</Descriptions.Item>\n              <Descriptions.Item label=\"Authors\">{item.authors}</Descriptions.Item>\n              <Descriptions.Item label=\"Subjects\">{item.subjects}</Descriptions.Item>\n              <Descriptions.Item label=\"Publisher\">{item.publisher}</Descriptions.Item>\n            </Descriptions>\n          </Card>\n        </List.Item>\n      )}\n    />\n  )  \n}\n\nconst App = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, initialState)\n  console.log(state)\n  const searchHandler = query => {\n    dispatch({\n      type: \"SET_LOADING\",\n      payload: true,\n    })\n    Api.Search({\n      field: state.field,\n      query,\n    })\n      .then(({ data }) => {\n        dispatch({\n          type: \"SET_BOOKS\",\n          payload: data,\n        })\n        dispatch({\n          type: \"SET_LOADING\",\n          payload: false,\n        })\n      })\n      .catch(console.log)\n  }\n  const books =\n    state.books.length > 0 ? <SearchResults dataSource={state.books} /> : null\n  return (\n    <Layout>\n      <Header className=\"header\" style={{ background: \"#fff\" }}>\n        <Input.Group compact style={{ margin: \"16px 0\" }}>\n          <Select defaultValue=\"title\">\n            <Option value=\"title\">Title</Option>\n            <Option value=\"authors\">Author</Option>\n          </Select>\n          <Input.Search\n            placeholder=\"input search text\"\n            enterButton\n            style={{ width: \"30%\" }}\n            onSearch={searchHandler}\n          />\n        </Input.Group>\n      </Header>\n      <Layout style={{ padding: \"0 24px 24px\" }}>\n        <Content\n          className=\"site-layout-background\"\n          style={{\n            padding: 24,\n            margin: 0,\n            minHeight: \"91vh\",\n          }}\n        >\n          {books}\n        </Content>\n      </Layout>\n    </Layout>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}